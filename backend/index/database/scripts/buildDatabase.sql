-- Create table SOURCE
CREATE TABLE SOURCE (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SOURCE_NAME VARCHAR2(255) NOT NULL,
    BASE_URL VARCHAR2(2048),
    ICON BLOB
);

-- Create table DOCUMENT
CREATE TABLE DOCUMENT (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITLE VARCHAR2(2048) NOT NULL,
    SUMMARY CLOB NOT NULL,
    DOCUMENT_TYPE VARCHAR2(50) NOT NULL CHECK (DOCUMENT_TYPE IN ('paper', 'website')),
    PUBLISH_DATE DATE,
    DOCUMENT_URL VARCHAR2(2048) NOT NULL,
    DOCUMENT_LENGTH NUMBER NOT NULL,
    DOCUMENT_LANGUAGE VARCHAR2(50) CHECK (DOCUMENT_LANGUAGE IN ('spanish', 'english')),
    SOURCE_ID NUMBER NOT NULL,
    CONSTRAINT FK_SOURCE FOREIGN KEY (SOURCE_ID) REFERENCES SOURCE (ID)
);

-- Create table TERM
CREATE TABLE TERM (
    TERM VARCHAR2(255) PRIMARY KEY,
    DOCUMENT_FREQUENCY NUMBER NOT NULL,
    IDF NUMBER NOT NULL
);

-- Create table APPEARS
CREATE TABLE APPEARS (
    DOCUMENT_ID NUMBER NOT NULL,
    TERM VARCHAR2(255) NOT NULL,
    TERM_FREQUENCY NUMBER NOT NULL,
    PRIMARY KEY (DOCUMENT_ID, TERM),
    CONSTRAINT FK_DOCUMENT FOREIGN KEY (DOCUMENT_ID) REFERENCES DOCUMENT (ID),
    CONSTRAINT FK_TERM FOREIGN KEY (TERM) REFERENCES TERM (TERM)
);

-- Create table DOCUMENT_STATISTICS
CREATE TABLE DOCUMENT_STATISTICS (
    DOCUMENT_COUNT NUMBER NOT NULL,
    AVERAGE_DOCUMENT_LENGTH NUMBER NOT NULL
);